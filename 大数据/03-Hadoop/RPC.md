# RPC

**什么是RPC**

RPCd的英文全程为（Remote Proceduer Call）译为远程过程调用。

**RPC的作用**

- 解决分布式系统中服务之间调用问题（通信透明性）
- 远程调用时，要能够像本地调用一样方便，然调用者感知不到远程调用的逻辑。

**什么是分布式系统间的透明性**

​		分布式系统间的相互调用其实是基本进程间的显式消息交换，然而，消息的发送和接收过程无法隐藏。而通信的隐藏对于分布式中实现访问的透明性是极为重要的。试想一下比如你要想查看一个订单详情，然后订单系统部署了三台机器。假设没有RPC，其它系统想通过调订单系统查询订单详情的信息，就必须知道订单系统部署机器的ip和端口，每个调用者必须关注订单系统新加或者下线和换机器部署等情景。试想这对调用者来说是有多蛋疼。换言之分布式系统通信就应该是透明的，这样调用者就不需要关心调用的是那台机器上面的服务。在调用者的角度这个远程服务应该和调用本地服务一样是一个单一稳定可靠的服务。

**RPC详细解释**

​		基于这样的背景有人就提出了一种与传统方法截然不同的通信手段：不同机器上的进程是允许相与调用的，当机器A上的进程调用机器B上的进程时，A上的调用进程被挂起，而B上的被调用进程开始执行。调用方可以通过使用参数将信息传送给被调用方，然后可以通过传回的结果得到信息。编程人员看不到任何消息传递过程。这个方法就被程为远程过程调用RPC.

**RPC好处**

- 屏蔽了底层通讯的复杂性，在分布式系统中提供了通讯的透明性。

**注意**

RPC是点对点的通讯方式，要求通讯两端必须同时进行，当其中一端挂了，就会导致通讯异常，并且调用者一般会阻塞住等待结果的返回。性能相对不是很高，当然也有异步RPC，超时重试情况下服务端提供者需要做好服务幂等性处理。相对于RPC而言采用了面向消息通讯模型的架构比如MQ则不要求通讯两端同时运行，发送消息时也不需要阻塞等待结果的返回通讯性能就高出很多。

**总结**

​	RPC调用是指不同机器间的进程通讯。*程序不需要关心某个远程服务是在哪台机器上执行的，远程服务调用就和调用本地服务一样。*要在不同机器间进行通讯我们需要知道通讯机器的ip和端口号。ip帮助我们定位是哪一台机器，端口号帮我们定位是机器上的哪一个进程。RPC的出现使用得机器的进程通讯透明化，这在分布式系统中是很重要的。RPC调用架构中客户端和服务端都和一个叫服务注册中心的第三方通讯。